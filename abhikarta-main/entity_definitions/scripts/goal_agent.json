{
    "template_id": "script_goal_agent",
    "name": "Goal-Oriented Planner Agent",
    "description": "A goal-oriented agent with planning, milestone tracking, and adaptive execution",
    "entity_type": "agent",
    "agent_type": "goal",
    "category": "planning",
    "difficulty": "intermediate",
    "icon": "bi-bullseye",
    "tags": [
        "agent",
        "goal",
        "planning",
        "milestones"
    ],
    "use_count": 0,
    "script_content": "\"\"\"\nGoal-Oriented Planner Agent - Python Script Mode\n=================================================\nCreates plans with milestones and tracks progress.\n\"\"\"\n\nfrom typing import Dict, List, Any, Optional\nfrom dataclasses import dataclass, field\nfrom enum import Enum\nimport uuid\nfrom datetime import datetime\n\n\nclass GoalStatus(Enum):\n    NOT_STARTED = \"not_started\"\n    IN_PROGRESS = \"in_progress\"\n    COMPLETED = \"completed\"\n    BLOCKED = \"blocked\"\n\n\nclass Priority(Enum):\n    CRITICAL = 1\n    HIGH = 2\n    MEDIUM = 3\n    LOW = 4\n\n\n@dataclass\nclass Milestone:\n    milestone_id: str\n    name: str\n    description: str\n    status: GoalStatus = GoalStatus.NOT_STARTED\n    progress: float = 0.0\n    \n    def complete(self):\n        self.status = GoalStatus.COMPLETED\n        self.progress = 100.0\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            \"milestone_id\": self.milestone_id,\n            \"name\": self.name,\n            \"status\": self.status.value,\n            \"progress\": self.progress\n        }\n\n\n@dataclass\nclass SubGoal:\n    subgoal_id: str\n    name: str\n    priority: Priority\n    milestones: List[Milestone] = field(default_factory=list)\n    \n    @property\n    def progress(self) -> float:\n        if not self.milestones:\n            return 0.0\n        return sum(m.progress for m in self.milestones) / len(self.milestones)\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            \"subgoal_id\": self.subgoal_id,\n            \"name\": self.name,\n            \"priority\": self.priority.value,\n            \"progress\": self.progress,\n            \"milestones\": [m.to_dict() for m in self.milestones]\n        }\n\n\n@dataclass\nclass Plan:\n    plan_id: str\n    goal: str\n    sub_goals: List[SubGoal] = field(default_factory=list)\n    status: GoalStatus = GoalStatus.NOT_STARTED\n    \n    @property\n    def progress(self) -> float:\n        if not self.sub_goals:\n            return 0.0\n        return sum(sg.progress for sg in self.sub_goals) / len(self.sub_goals)\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            \"plan_id\": self.plan_id,\n            \"goal\": self.goal,\n            \"status\": self.status.value,\n            \"progress\": self.progress,\n            \"sub_goals\": [sg.to_dict() for sg in self.sub_goals]\n        }\n\n\nclass GoalPlanner:\n    def __init__(self):\n        self.plans: Dict[str, Plan] = {}\n        self.current_plan_id: Optional[str] = None\n    \n    def create_plan(self, goal: str) -> Plan:\n        plan = Plan(\n            plan_id=str(uuid.uuid4())[:8],\n            goal=goal\n        )\n        self.plans[plan.plan_id] = plan\n        self.current_plan_id = plan.plan_id\n        return plan\n    \n    def decompose_goal(self, plan: Plan, num_subgoals: int = 3) -> Plan:\n        for i in range(num_subgoals):\n            subgoal = SubGoal(\n                subgoal_id=f\"sg_{i+1}\",\n                name=f\"Sub-goal {i+1}\",\n                priority=Priority.MEDIUM\n            )\n            for j in range(2):\n                milestone = Milestone(\n                    milestone_id=f\"ms_{i+1}_{j+1}\",\n                    name=f\"Milestone {j+1}\",\n                    description=f\"Milestone for sub-goal {i+1}\"\n                )\n                subgoal.milestones.append(milestone)\n            plan.sub_goals.append(subgoal)\n        return plan\n    \n    def get_next_actions(self, plan_id: str) -> List[Dict[str, Any]]:\n        plan = self.plans.get(plan_id)\n        if not plan:\n            return []\n        actions = []\n        for sg in plan.sub_goals:\n            for ms in sg.milestones:\n                if ms.status != GoalStatus.COMPLETED:\n                    actions.append({\n                        \"subgoal\": sg.name,\n                        \"milestone\": ms.name,\n                        \"progress\": ms.progress\n                    })\n        return actions\n\n\n# Configuration\nSYSTEM_PROMPT = \"\"\"You are a goal-oriented planning agent.\n1. Understand the goal\n2. Decompose into sub-goals\n3. Create milestones\n4. Track progress\n5. Report completion\n\"\"\"\n\nplanner = GoalPlanner()\n\nagent = {\n    \"name\": \"Goal-Oriented Planner\",\n    \"description\": \"Plans and tracks goal completion\",\n    \"agent_type\": \"goal\",\n    \"version\": \"1.0.0\",\n    \"system_prompt\": SYSTEM_PROMPT,\n    \"tools\": [\"create_plan\", \"decompose\", \"update_progress\"],\n    \"llm_config\": {\n        \"provider\": \"ollama\",\n        \"model\": \"llama3.2:3b\",\n        \"temperature\": 0.4\n    },\n    \"tags\": [\"planning\", \"goal\", \"milestones\", \"python-script\"],\n    \"category\": \"planning\"\n}\n\n__export__ = agent\n\n\ndef execute(input_data: Dict[str, Any]) -> Dict[str, Any]:\n    goal = input_data.get(\"goal\", input_data.get(\"prompt\", \"\"))\n    plan = planner.create_plan(goal)\n    plan = planner.decompose_goal(plan)\n    plan.status = GoalStatus.IN_PROGRESS\n    \n    return {\n        \"success\": True,\n        \"response\": f\"Created plan for: {goal}\",\n        \"plan\": plan.to_dict(),\n        \"next_actions\": planner.get_next_actions(plan.plan_id)\n    }\n\n\ndef validate() -> tuple:\n    if not agent.get(\"name\"):\n        return False, \"Agent must have a name\"\n    return True, \"Goal Agent configuration is valid\"\n"
}